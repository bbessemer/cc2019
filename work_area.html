<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title id="WindowTitle">Window Title</title>
		<!-- Style -->
		<link rel="stylesheet" type="text/css" href="index_style.css">
		<link rel="stylesheet" type="text/css" href="visualization.css">
		<link rel="stylesheet" type="text/css" href="work_area_style.css">
		<!-- Style has to be embedded within file for ace -->
		<style type="text/css" media="screen">
		</style>
				<!-- Our code area scripts -->
		<script src="index_interaction.js"></script>
		<script src="ace-builds/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
		<script src="code_area.js" type="text/javascript" charset="utf-8"></script>
		<script src="viewmodel.js"></script>
		<script src="interpreter.js"></script>
		<script src="parser.js"></script>
	</head>
	<body style="overflow: hidden">
<style>


</style>
		<div id="TextButtonsView" class="PagePane">
			<div id="TopSection" style="text-align: center;">
				<div id="TaskTitle">
					Task Title
				</div>
				<div id="TaskDescription">
					Problem task goes here
				</div>
			</div>
		</div>
		<div id="EntireCodeView" class="PagePane" style="transform: translateX(0%)">
			<div id="TopSection" style="text-align: center;"></div>
			<div id="Visualizer">
				<div id="OperatorsArea">
					<div class="Operator" id="PlusOp">
						<div class="OperatorSymbol">+</div>
					</div>
					<div class="Operator" id="MinusOp">
						<div class="OperatorSymbol">-</div>
					</div>
					<div class="Operator" id="MultOp">
						<div class="OperatorSymbol">*</div>
					</div>
					<div class="Operator" id="DivOp">
						<div class="OperatorSymbol">/</div>
					</div>
				</div>
				<div id="StackFramesZone"></div>
			</div>

		<!-- Our code area element -->
		<div id="Editor">
			<div id="CodeArea"></div>
		</div>
		<div class="ExecutionButtonContainer" style="left: calc(50% - 70px);">
			<button id="RunButton" type="button" class="ExecutionButton">
				<img src="baseline-play_circle_outline-24px.svg" class="ExecutionButtonImage"></img>
			</button>
			<div class="ExecutionButtonHint"><div class="ExecutionButtonHintText">
				Run Code
			</div></div>
		</div>
		<div class="ExecutionButtonContainer" style="left: calc(50% + 20px);">
			<button id="NextButton" type="button" class="ExecutionButton">
				<img src="baseline-arrow_forward-24px.svg" class="ExecutionButtonImage"></img>
			</button>
			<div class="ExecutionButtonHint"><div class="ExecutionButtonHintText">
				Next Section
			</div></div>
		</div>
</div>
<div id="EntireInfoView" class="PagePane" style="transform: translateX(calc(-100% + 25px))">
	
	<img src="tabbutton.png" id="TabButton">
		<img src="baseline-keyboard_arrow_right-24px.svg" id="TabButton_Arrow"></img>
	</img>
	<div id="InfoBox">
		<!-- Put info text stuff here -->
		<div id="InfoTitle">
			Info Title
		</div>
		<div id="InfoText">
			Here's some brief explanation of what we just taught
		</div>
	</div>
</div>

		<!-- Our local script -->
		<script>
			//Creates the code editor out of an iframe
			var codeArea = window.CreateCodeArea(800, 760);
			codeArea.CreateEditor("CodeArea", "Editor",
`int add (int a, int b)
{
	int x = a + b; /* block comment */
	return x; //Oh man, I love working with APIs
}`);

			document.getElementById('RunButton').onclick = function()
			{
				//ClearVisualizer();
				runCode(codeArea.GetText(), "add", [1, 2]);
			}
		</script>
	</body>

	<script>
		var EntireCodeView = document.getElementById("EntireCodeView");
		var EntireInfoView = document.getElementById("EntireInfoView");
		var correctAnswer = '';

		function ChangeWorkAreaText(title, problem, infotitle, info, desired)
		{
			document.getElementById('TaskTitle').innerHTML = title;
			document.getElementById('TaskDescription').innerHTML = problem;
			document.getElementById('InfoTitle').innerHTML = infotitle;
			document.getElementById('InfoText').innerHTML = info;
			correctAnswer = desired;
		}

		function ShowCodeView()
		{
			EntireCodeView.style = "transform: translateX(0%)";
			EntireInfoView.style = "transform: translateX(calc(-100% + 25px))";
		}

		function ShowInfoView()
		{
			EntireCodeView.style = "transform: translateX(calc(25% - 40px))";
			EntireInfoView.style = "transform: translateX(0%)";
		}

		var IsOnCodeView = true;

		document.getElementById('TabButton').onclick = function()
		{
			if (IsOnCodeView) ShowInfoView();
			else ShowCodeView();
			IsOnCodeView = !IsOnCodeView;
		}

		//document.getElementById('TabButton').onclick = ToggleView();
	</script>

	<script src="visualization.js"></script>


<!-- Test script to make stuff animate in the Visualizer area -->

	<script>

		var A = NewStackFrame("oof");

		NewFrameItem(A).innerHTML = "5";
		NewFrameItem(A).innerHTML = "25";
		NewFrameItem(A).innerHTML = "125";

		var x;
		var test = [
		    //() => runCode(codeArea.GetText(), "add", [1, 2])
		]
		var doer;
		var pos = 0;
		function donext ()
		{
			if (pos >= test.length) clearInterval(doer);
			else test[pos++]();
		};
		doer = setInterval(donext,1000);
	</script>

	<!--                          Debug tools code                             -->
	<script>
    document.addEventListener("keydown", function (e)
		{
			//if (e.which === 122) ToggleView();

			if (e.which === 123) require("remote").window.OpenDevTools();
			else if (e.which === 116) location.reload();
    });
	</script>
</html>
